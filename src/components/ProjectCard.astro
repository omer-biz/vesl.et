---
import type { ImageMetaData } from 'astro';
import { Image } from 'astro:assets';

interface Props {
  title: string;
  description: string;
  tech: string[];
  imagePath: string;
  github?: string;
  demo?: string;
}

const { title, description, tech, imagePath, github, demo } = Astro.props;
const images = import.meta.glob<{ default: ImageMetaData }>('/src/assets/projects/*.{jpeg,jpg,png,gif}')
if (!images[imagePath]) throw new Error(`"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`);
---

<article class="group border border-stone-400/30 bg-stone-300/20 rounded-sm overflow-hidden flex flex-col md:flex-row h-full transition-all hover:border-amber-600/50 hover:bg-stone-300/40">
  <div class="md:w-48 w-full h-48 md:h-auto shrink-0 border-b md:border-b-0 md:border-r border-stone-400/30 overflow-hidden">
    <Image

      src={images[imagePath]()} 
      alt={title} 
      class="w-full h-full object-cover grayscale transition-all duration-500 group-hover:grayscale-0 group-hover:scale-105"
    />
  </div>

  <div class="p-6 flex flex-col justify-between flex-grow">
    <div>
      <div class="flex justify-between items-start mb-2">
        <h3 class="text-xl font-bold text-stone-800">{title}</h3>
        <div class="flex gap-3 text-sm">
          {github && <a href={github} class="text-orange-800 hover:text-teal-700 font-bold">[src]</a>}
          {demo && <a href={demo} class="text-orange-800 hover:text-teal-700 font-bold">[live]</a>}
        </div>
      </div>

      <p class="text-stone-600 text-sm leading-relaxed mb-4">
        {description}
      </p>
    </div>

    <div class="flex flex-wrap gap-2 mt-auto">
      {tech.map((item) => (
        <span class="text-[10px] uppercase tracking-wider font-bold px-2 py-0.5 bg-stone-800 text-stone-200 rounded-sm">
          {item}
        </span>
      ))}
    </div>
  </div>
</article>
